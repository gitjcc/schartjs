!function(t){"function"==typeof define&&define.amd?define(["snap","jquery"],t):s=t(Snap,$)}(function(t,e){function r(t,e){}function n(t,e,r){if(t.clear(),T?(t.unmousedown(),t.unmousemove(),t.unmouseup()):(t.untouchmove(),t.untouchstart(),t.untouchend()),"object"!=typeof e)return console.log("s:非法数据"),k(t,r);for(var n in e)return!0;return console.log("s:无数据"),k(t,r)}function i(t,r,i,o,a,f){function l(){return n(E,r,f)?("function"!=typeof o&&(o=function(){}),_=2==i.length,A=_?r.k1.length>r.k2.length?r.k1:r.k2:r,I=A.length>1?(K-q)/(A.length-1):K-q,void c()):!1}function c(){var n=0;return e.each(r,function(t,r){_?e.each(r,function(t,e){n=s(e.price,n)}):n=s(r.price,n)}),n?(P=F(n,N),chartSuccess(t,"line"),y(),x(),void u()):k(E,f)}function s(t,e){var r=parseFloat(t);return r>e?r:e}function u(){T?(E.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(E.node).offset().left;h(r)}),e(E.node).mouseleave(function(){d()})):(E.touchstart(function(t){var e=t.touches[0].clientX;j=setTimeout(function(){h(e),E.touchmove(function(t){t.preventDefault();var e=t.touches[0].clientX;h(e)})},100),E.touchmove(function(t){clearTimeout(j)})}),E.touchend(function(){E.untouchmove(),d(),clearTimeout(j)}))}function h(t){var r=g(t),n=e(".svglinetip").attr("svglineid");n!=r&&(e(".svglinetip").remove(),e(".svglinemaker").hide(),m(r))}function d(){e(".svglinetip").remove(),e(".svglinemaker").show(),o()}function v(t,e,r){var n=t*I+q,i=D(e.price);if(!r)var o=E.line(n,Z,n,O).attr({stroke:$?"#6ba8e1":"#d2d2d2",strokeWidth:2.5});var a=E.circle(n,i,3).attr({stroke:$?"#fff":r?"#f5a25c":"#2484ce",strokeWidth:2,fill:$?"#47a8ef":"#fff"}),f=E.paper.rect(n,r?O+1:H,100,O-H,4).attr({fill:$?"#fff":r?"#f5a25c":"#47a8ef"}),l=E.paper.text(n,r?2*O-H-(O-H-14)/2:O-(O-H-14)/2,[e.name+":　","￥",L(e.price)+"　",e.num,"笔"]).attr({fill:$?"#2484ce":"#fff",fontSize:14});l.select("tspan:nth-child(2)").attr({fontSize:$?12:10}),l.select("tspan:nth-child(5)").attr({fontSize:$?12:10});var c=l.getBBox().width,s=c+20,u=n-s/2;0>u?u=0:u>Y-s&&(u=Y-s),f.attr({width:s,x:u}),l.attr({x:(s-c)/2+u});var h=E.paper.g();r||h.add(o),h.add(a,f,l),h.attr("class","svglinetip"),h.attr("svglineid",t)}function p(t){void 0!=r.k1[t]&&v(t,r.k1[t]),void 0!=r.k2[t]&&v(t,r.k2[t],!0)}function m(t){_?(o([r.k1[t],r.k2[t]]),p(t)):(o(r[t]),v(t,r[t]))}function g(t){var r=t/e(E.node).width()*Y;q>=r&&(r=q),r>=K&&(r=K-1);var n=Math.floor((r-q)/I);return(r-q)%I>I/2&&1!=A.length&&n++,n}function x(){var t,e,n="M"+q+" "+Z,i="M"+q+" "+Z;if(_)t="M"+q+" "+D(r.k1[0].price),e="M"+q+" "+D(r.k2[0].price);else{var o=E.circle(2,2,1.2).attr({stroke:$?"#ffffff":"#2484ce",strokeWidth:1,fill:$?"#2484ce":"#ffffff","class":"svglinemaker"}),a=o.marker(0,0,4,4,2,2);t="M"+q+" "+D(r[0].price),1==A.length&&(t+="L"+(I+q)+" "+D(r[0].price),n+="L"+(I+q)+" "+Z)}for(var f=1;f<A.length;f++)_?(void 0!=r.k1[f]&&(t+="L"+(I*f+q)+" "+D(r.k1[f].price),n+="L"+(I*f+q)+" "+Z),void 0!=r.k2[f]&&(e+="L"+(I*f+q)+" "+D(r.k2[f].price),i+="L"+(I*f+q)+" "+Z)):void 0!=r[f]&&(t+="L"+(I*f+q)+" "+D(r[f].price),n+="L"+(I*f+q)+" "+Z);b(n,t);var l=E.path(n).attr({stroke:$?"#fffbcb":"#47a8ef",strokeWidth:2.5,fill:"none",strokeLinejoin:"bevel",markerEnd:a});if(_)var c=E.path(i).attr({stroke:$?"#ffffff":"#f5a25c",strokeWidth:2.5,fill:"none",strokeLinejoin:"bevel"});var s=E.g().attr({"class":"svglinemaker"});l.animate({path:t},800,mina.easeinout,function(){_||B(s)}),_&&c.animate({path:e},800,mina.easeinout)}function B(t){var e=r[r.length-1].price,n=parseFloat(r[r.length-1].price),i=n>P*N/1.3?24:-18,o=E.rect(Y,D(e)+i-13,0,17,10,10).attr({fill:$?"#ffffff":"#89c058"}),a=E.text(Y,D(e)+i,["￥",L(e)]).attr({fill:$?"#2f81d6":"#ffffff",fontSize:12});a.select("tspan").attr("font-size","11"),o.attr({x:K-a.getBBox().width-5,width:a.getBBox().width+10}),a.attr({x:K-a.getBBox().width}),t.add(o,a)}function b(t,e){var r=t+"V"+Z+"H"+q,n=e+"V"+Z+"H"+q,i=E.path(r).attr({stroke:"none",fill:$?E.paper.gradient("l(0, 0, 0,1 )#ffffff-#2884D3"):"#47a8ef",fillOpacity:$?"0.3":"0.1",strokeLinejoin:"bevel",strokeLinecap:"round"});i.animate({path:n},800,mina.easeinout)}function z(){for(var t=(Z-V)/N,e=E.line(q,Z,K,Z).attr({stroke:$?"#519ddb":"#e2e2e2",strokeDasharray:"10 2",strokeWidth:.5}),r=1;N>=r;r++){var n=Z-r*t;e.clone().attr({x1:q,y1:n,x2:K,y2:n}),E.text(q,n+13,L(P*r)).attr({fill:$?"#7abfe9":W,fontSize:10})}}function M(){var t=E.paper.g().attr({fill:$?"#7abfe9":W,fontSize:10}),e=_?r.k1:r;if(!e.length)return console.log("s:k1无数据,画不出底部刻度"),!1;var n=e[0].name.indexOf("~")+1,i=X();if(0!=n&&i.length>4&&660>Y){var o=E.text(0,Z+12,e[0].name.substr(0,n)),a=E.text(0,Z+22,e[0].name.substr(n)),f=E.text(Y,Z+12,e[e.length-1].name.substr(0,n)),l=E.text(Y,Z+22,e[e.length-1].name.substr(n));t.add(o,f,a,l),f.attr({x:Y-f.getBBox().width}),l.attr({x:Y-f.getBBox().width});for(var c=1;c<i.length-1;c++){var s=E.text(I*i[c]+q,Z+12,e[i[c]].name.substr(0,n)),u=E.text(I*i[c]+q,Z+22,e[i[c]].name.substr(n));s.attr({x:I*i[c]+q-s.getBBox().width/2}),u.attr({x:I*i[c]+q-s.getBBox().width/2}),t.add(s,u)}}else{var h=E.text(0,Z+12,e[0].name),d=E.text(Y,Z+12,e[e.length-1].name);t.add(h,d),d.attr({x:Y-d.getBBox().width});for(var v=1;v<i.length-1;v++){var p=E.text(I*i[v]+q,Z+12,e[i[v]].name);p.attr({x:I*i[v]+q-p.getBBox().width/2}),t.add(p)}}}function y(){z(),M()}function X(){var t,e,r=[],n=A.length-1;if(n&&n-1)if(n%5)if(n%4)if(n%3)if((n-1)%5)if((n-1)%4)if((n-1)%3)if(n%2){if((n-1)%2)return console.log("s:均分日期未成功"),w(E,"数据异常");e=2}else e=2;else e=3;else e=4;else e=5;else e=3;else e=4;else e=5;else e=1;t=Math.floor(n/e);for(var i=0;e>i;i++)r.push(t*i);var o=t*e;return n%e&&o++,r.push(o),r}function D(t){return t?(t=parseFloat(t),Z-t/(P*N)*(Z-V)):Z}var P,I,_,A,j,E=Snap(t),Y=S(a,"vw",e(t).width()),C=S(a,"vh",e(t).height()),H=S(a,"tt",0),O=S(a,"tb",30),V=S(a,"ct",2*(O-H)+H+10),Z=C-23,q=10,K=Y-10,N=5,$=S(a,"isHome",!1);S(a,"isfull",!1);l()}function o(t,r,i,o,a,f){function l(){return n(Y,r,f)?("function"!=typeof o&&(o=function(){}),I=2==i.length?!0:!1,_=void 0!=r[0].item?!0:!1,I||_||void 0==r[0].price&&(U=!0),P=I?37:26,void c()):!1}function c(){for(var e=0,n=0,i=0;i<r.length;i++){if(e>=100){r.splice(i,r.length-i);break}if(_){for(var o=0;o<r[i].item.length;o++){var a=r[i].item[o],f=s(a,n);if(f){if(n=f,84>C){var l=13*(a.name.toString().length+1)+6>84?84:13*(a.name.toString().length+1)+6;C=l>C?l:C}}else r[i].item.splice(o,1),o--;e++}r[i].item.length||(r.splice(i,1),i--)}else{U&&(r[i].price=r[i].num);var f=s(r[i],n);if(f){if(n=f,84>C){var l=13*r[i].name.toString().length+6>84?84:13*r[i].name.toString().length+6;C=l>C?l:C}}else r.splice(i,1),i--;e++}}return r.length?(D=F(n,G),chartSuccess(t,"bar"),g(),b(),void m()):(console.log("s:"+e+"条数据全是0"),k(Y))}function s(t,e){var r;return I?0==parseFloat(t.k1.price)&&0==parseFloat(t.k2.price)?!1:(r=parseFloat(t.k1.price)>e?parseFloat(t.k1.price):e,r=parseFloat(t.k2.price)>r?parseFloat(t.k2.price):r):0==parseFloat(t.price)?!1:r=parseFloat(t.price)>e?parseFloat(t.price):e}function u(t,e,r){if(e){var n,o=t*P+P/2+q+J;n=I?parseFloat(e.price)>parseFloat(r.price)?M(e.price)+C+8:M(r.price)+C+8:M(e.price)+C+8;var a=Y.line(n,o,n,Z).attr({stroke:"#d2d2d2",strokeWidth:2.5}),f=Y.circle(n,o,3).attr({stroke:"#47a8ef",strokeWidth:3,fill:"#fff"}),l=Y.paper.rect(n,V,100,Z-V,4).attr({fill:"#47a8ef"});if(U){var c=Y.paper.text(n,Z-(Z-V-14)/2,[i[0]+":　",e.num+"次",""]).attr({fill:"#fff",fontSize:14});c.select("tspan:nth-child(3)").attr({fontSize:8})}else{var c=Y.paper.text(n,Z-(Z-V-14)/2,[i[0]+":　","￥",L(e.price)+"　",e.num,"笔"]).attr({fill:"#fff",fontSize:14});c.select("tspan:nth-child(2)").attr({fontSize:8}),c.select("tspan:nth-child(5)").attr({fontSize:8})}var s=c.getBBox().width,u=s+20,h=n-u/2;0>h?h=0:h>H-u&&(h=H-u),l.attr({width:u,x:h}),c.attr({x:(u-s)/2+h});var d=Y.paper.g();if(d.attr("class","svgbartip"),d.attr("svgbartipid",t),d.add(l,c,a,f),r){var v=Y.paper.rect(n,Z+1,100,Z-V,4).attr({fill:"#f5a25c"}),p=Y.paper.text(n,2*Z-V-(Z-V-14)/2,[i[1]+":　","￥",L(r.price)+"　",r.num,"笔"]).attr({fill:"#fff",fontSize:14});p.select("tspan:nth-child(2)").attr({fontSize:8}),p.select("tspan:nth-child(5)").attr({fontSize:8});var m=p.getBBox().width,g=m+20,x=n-g/2;0>x?x=0:x>H-g&&(x=H-g),v.attr({width:g,x:x}),p.attr({x:(g-m)/2+x}),d.add(v,p)}}else console.log("s:点击到了bar之外的区域")}function h(t){if(_){var e=z(t,r);I?u(t,r[e.parent].item[e.child].k1,r[e.parent].item[e.child].k2):u(t,r[e.parent].item[e.child]),o(r[e.parent].item[e.child]),R&&d(r[e.parent].item[e.child].name)}else I?u(t,r[t].k1,r[t].k2):u(t,r[t]),o(r[t]),R&&d(r[t].name)}function d(t){var e=Y.text(0,V-8,t).attr({"class":"svgbartip",fill:"#1978bc",fontSize:18});e.attr("x",H/2-e.getBBox().width/2)}function v(){e(".svgbartip").remove(),o()}function p(t,e){Q=J+t-A,Q>0?Q=0:-P*(X+1)+(K-q)>Q&&(Q=P*(X+1)>K-q?-P*(X+1)+(K-q):0),j.transform("translate(0,"+Q+")")}function m(){T?(Y.mousedown(function(t){A=t.clientY+e(document).scrollTop()-e(Y.node).offset().top,A/=1.4,A>q&&K>A&&(E=setTimeout(function(){var t=A-q-J,e=Math.floor(t/P);e>=0&&X>e&&h(e)},100),Y.mousemove(function(t){var r=t.clientY+e(document).scrollTop()-e(Y.node).offset().top;r/=1.4,r-A!=0&&(v(),clearTimeout(E)),p(r,t)}))}),Y.mouseup(function(t){Y.unmousemove(),v(),clearTimeout(E),J=Q}),e(t).mouseleave(function(){Y.unmousemove()})):(Y.touchstart(function(t){A=t.touches[0].clientY;var r=A+e(document).scrollTop()-Y.node.offsetTop;r>q&&K>r&&(E=setTimeout(function(){Y.untouchmove();var t=r-q-J,n=Math.floor(t/P);n>=0&&X>n&&h(n),Y.touchmove(function(t){t.preventDefault(),A=t.touches[0].clientY;var r=A+e(document).scrollTop()-Y.node.offsetTop;if(r>q&&K>r){var n=r-q-J,i=Math.floor(n/P),o=e(".svgbartip").attr("svgbartipid");i>=0&&X>i&&o!=i&&(v(),h(i))}})},100),Y.touchmove(function(t){if(clearTimeout(E),R){t.preventDefault();var e=t.touches[0].clientY;p(e,t)}}))}),Y.touchend(function(t){Y.untouchmove(),v(),clearTimeout(E),J=Q}))}function g(){for(var t=($-C)/G,e=0;G>=e;e++){var r=C+e*t;Y.line(r,K,r,q).attr({stroke:"#e2e2e2",strokeDasharray:"10 2",strokeWidth:.5});var n=Y.text(r,O-4,L(D*e)).attr({fill:W,fontSize:10});n.attr("x",r-n.getBBox().width/2)}}function x(t,e,r){if(e){var n=y.text(C,I?X*P+24:X*P+16,_?B(e,5):B(e,6)).attr({fill:W,fontSize:12});n.attr("x",C-n.getBBox().width-4),j.add(n)}var i;i=r%2&&!_?"#88bf57":"#7cb7ef";var o=y.rect(C,e?X*P+8:X*P+P/2+1,M(t),10).attr({fill:e?i:"#f5a25c"});j.add(o)}function w(t,e){x(t.k1.price,t.name,e),x(t.k2.price,!1,e)}function b(){y=Y.svg(0,q,H,K-q),j=y.g(),X=0;for(var t=0;t<r.length;t++){var n=r[t];if(_){var i=0;if(e.each(n.item,function(e,r){I?w(r,t):x(r.price,r.name,t),i++,X++}),i>1){var o=y.text(N,(X-i)*P+i*P/2+6,i>2?B(n.name,5):B(n.name,4)).attr({fill:W,fontSize:10});o.attr({x:N-o.getBBox().width/2}),o.transform("roate(-90)"),j.add(o)}var a=y.line(N,X*P,C-4,X*P).attr({stroke:W,strokeDasharray:"5 2",strokeWidth:1});j.add(a)}else I?w(n):x(n.price,n.name),X++}}function M(t){return t?parseFloat(t)/(G*D)*($-C):0}var y,X,D,P,I,_,A,j,E,Y=Snap(t),C=0,H=S(a,"vw",e(t).width()),O=S(a,"vh",e(t).height()),V=S(a,"tt",0),Z=S(a,"tb",30),q=S(a,"ct",2*(Z-V)+V+10),K=O-18,N=10,$=H-20,G=400>H?5:6,J=0,Q=0,R=S(a,"isfull",!1),U=!1;l()}function a(t,r,i,o,a,f){function l(){return n(P,r,f)?("function"!=typeof o&&(o=function(){}),M=!0,T=!1,K=!0,z=26,void c()):!1}function c(){for(var e=0,n=0,i=0;i<r.length;i++){if(e>=100){r.splice(i,r.length-i);break}K&&(r[i].k1.price=r[i].k1.num,r[i].k2.price=r[i].k2.num);var o=s(r[i],n);if(o){if(n=o,84>I){var a=13*r[i].name.toString().length+6>84?84:13*r[i].name.toString().length+6;I=a>I?a:I}}else r.splice(i,1),i--;e++}return r.length?(b=F(n,O),chartSuccess(t,"bar"),v(),m(),void d()):(console.log("s:"+e+"条数据全是0"),k(P))}function s(t,e){var r;return M?0==parseFloat(t.k1.price)&&0==parseFloat(t.k2.price)?!1:(r=parseFloat(t.k1.price)>e?parseFloat(t.k1.price):e,r=parseFloat(t.k2.price)>r?parseFloat(t.k2.price):r):0==parseFloat(t.price)?!1:r=parseFloat(t.price)>e?parseFloat(t.price):e}function u(){e(".svgbartip").remove(),o()}function h(t,e){Z=V+t-y,Z>0?Z=0:-z*(w+1)+(C-Y)>Z&&(Z=z*(w+1)>C-Y?-z*(w+1)+(C-Y):0),X.transform("translate(0,"+Z+")")}function d(){P.touchstart(function(t){y=t.touches[0].clientY;var r=y+e(document).scrollTop()-P.node.offsetTop;r>Y&&C>r&&P.touchmove(function(t){if(clearTimeout(D),q){t.preventDefault();var e=t.touches[0].clientY;h(e,t)}})}),P.touchend(function(t){P.untouchmove(),u(),clearTimeout(D),V=Z})}function v(){for(var t=(H-I)/O,e=0;O>=e;e++){var r=I+e*t;P.line(r,C,r,Y).attr({stroke:"#e2e2e2",strokeDasharray:"10 2",strokeWidth:.5});var n=P.text(r,A-4,L(b*e)).attr({fill:W,fontSize:10});n.attr("x",r-n.getBBox().width/2)}}function p(t,e,r){var n=x.text(I,w*z+14,T?B(r,5):B(r,6)).attr({fill:W,fontSize:12});n.attr("x",I-n.getBBox().width-4),X.add(n);var i=x.rect(I,w*z+5,g(e),10).attr({fill:"#e4e4e4"});X.add(i);var o=x.rect(I,w*z+5,g(t),10).attr({fill:"#88bf57"});X.add(o);var a=x.text(I+g(e),w*z+14,"　("+t+"/"+e+")").attr({fill:"#a3a3a3",fontSize:11}),f=e/(O*b);f>.8&&I+g(e)+a.getBBox().width>H&&(a.attr("x",I+g(e)-a.getBBox().width-4),a.attr("fill","#000")),X.add(a)}function m(){x=P.svg(0,Y,_,C-Y),X=x.g(),w=0;for(var t=0;t<r.length;t++){var e=r[t];p(e.k1.price,e.k2.price,e.name),w++}}function g(t){return t?parseFloat(t)/(O*b)*(H-I):0}var x,w,b,z,M,T,y,X,D,P=Snap(t),I=0,_=S(a,"vw",e(t).width()),A=S(a,"vh",e(t).height()),j=S(a,"tt",0),E=S(a,"tb",30),Y=S(a,"ct",2*(E-j)+j+10),C=A-18,H=_-20,O=400>_?5:6,V=0,Z=0,q=S(a,"isfull",!1),K=!1;l()}function f(t,r,i,o,a,f){function l(){return n(H,r,f)?("function"!=typeof o&&(o=function(){}),E=2==i.length?!0:!1,Y=void 0!=r[0].item?!0:!1,_=E?53:42,P=Y?V-37:V-25,void c()):!1}function c(){for(var e=0,n=0,i=0;i<r.length;i++){if(e>=100){r.splice(i,r.length-i);break}if(Y){for(var o=0;o<r[i].item.length;o++){var a=r[i].item[o],l=s(a,n);l?n=l:(r[i].item.splice(o,1),o--),e++}r[i].item.length||(r.splice(i,1),i--)}else{var l=s(r[i],n);l?n=l:(r.splice(i,1),i--),e++}}return r.length?(I=F(n,G),chartSuccess(t,"column"),g(),M(),void m()):(console.log("s:"+e+"条数据price全是0"),k(H,f))}function s(t,e){var r;return E?0==parseFloat(t.k1.price)&&0==parseFloat(t.k2.price)?!1:(r=parseFloat(t.k1.price)>e?parseFloat(t.k1.price):e,r=parseFloat(t.k2.price)>r?parseFloat(t.k2.price):r):0==parseFloat(t.price)?!1:r=parseFloat(t.price)>e?parseFloat(t.price):e}function u(t,e,r){if(e){var n,o=t*_+_/2+X+J;n=E?parseFloat(e.price)>parseFloat(r.price)?x(e.price)+K-8:x(r.price)+K-8:x(e.price)+K-8;var a=H.line(o,n,o,q).attr({stroke:"#d2d2d2",strokeWidth:2.5}),f=H.circle(o,n,3).attr({stroke:"#47a8ef",strokeWidth:3,fill:"#fff"}),l=H.paper.rect(o,Z,100,q-Z,4).attr({fill:"#47a8ef"}),c=H.paper.text(o,q-(q-Z-14)/2,[i[0]+":　","￥",L(e.price)+"　",e.num,"笔"]).attr({fill:"#fff",fontSize:14});c.select("tspan:nth-child(2)").attr({fontSize:8}),c.select("tspan:nth-child(5)").attr({fontSize:8});var s=c.getBBox().width,u=s+20,h=o-u/2;0>h?h=0:h>O-u&&(h=O-u),l.attr({width:u,x:h}),c.attr({x:(u-s)/2+h});var d=H.paper.g();if(d.attr("class","svgcolumntip"),d.attr("svgcolumntipid",t),d.add(l,c,a,f),r){var v=H.paper.rect(o,q+1,100,q-Z,4).attr({fill:"#f5a25c"}),p=H.paper.text(o,2*q-Z-(q-Z-14)/2,[i[1]+":　","￥",L(r.price)+"　",r.num,"笔"]).attr({fill:"#fff",fontSize:14});p.select("tspan:nth-child(2)").attr({fontSize:8}),p.select("tspan:nth-child(5)").attr({fontSize:8});var m=p.getBBox().width,g=m+20,w=o-g/2;0>w?w=0:w>O-g&&(w=O-g),v.attr({width:g,x:w}),p.attr({x:(g-m)/2+w}),d.add(v,p)}}else console.log("点击到了bar之外的区域")}function h(t){if(Y){var e=z(t,r);e&&(E?u(t,r[e.parent].item[e.child].k1,r[e.parent].item[e.child].k2):u(t,r[e.parent].item[e.child]),o(r[e.parent].item[e.child]),R&&v(r[e.parent].item[e.child].name))}else E?u(t,r[t].k1,r[t].k2):u(t,r[t]),o(r[t]),R&&v(r[t].name)}function d(){e(".svgcolumntip").remove(),o()}function v(t){var e=H.text(0,Z-8,t).attr({"class":"svgcolumntip",fill:"#1978bc",fontSize:18});e.attr("x",O/2-e.getBBox().width/2)}function p(t,e){Q=J+t-A,Q>0?Q=0:-_*(D+1)+O-X>Q&&(Q=_*(D+1)>O-X?-_*(D+1)+O-X:0),j.transform("translate("+Q+",0)")}function m(){T?(H.mousedown(function(t){H.unmousemove(),A=t.clientX+e(document).scrollLeft()-e(H.node).offset().left,A=A/e(H.node).width()*O,H.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(H.node).offset().left;r=r/e(H.node).width()*O,r-A!=0&&(d(),clearTimeout(C)),p(r,t)}),H.mouseup(function(t){H.unmousemove(),H.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(H.node).offset().left;r=r/e(H.node).width()*O,r=r-X-J;var n=Math.floor(r/_),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&D>n&&i!=n&&(d(),h(n))}),J=Q})}),H.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(H.node).offset().left;r=r/e(H.node).width()*O,r=r-X-J;var n=Math.floor(r/_),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&D>n&&i!=n&&(d(),h(n))}),e(t).mouseleave(function(){d()})):(H.touchstart(function(t){A=t.touches[0].clientX,R&&(A=A/e(H.node).width()*O),C=setTimeout(function(){H.untouchmove();var t=A-X-J,r=Math.floor(t/_);r>=0&&D>r&&h(r),H.touchmove(function(t){t.preventDefault(),A=t.touches[0].clientX,R&&(A=A/e(H.node).width()*O);var r=A-X-J,n=Math.floor(r/_),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&D>n&&i!=n&&(d(),h(n))})},100),H.touchmove(function(t){if(clearTimeout(C),R){var r=t.touches[0].clientX;t.preventDefault(),r=r/e(H.node).width()*O,p(r,t)}})}),H.touchend(function(t){H.untouchmove(),d(),clearTimeout(C),J=Q}))}function g(){X=0;for(var t=(P-K)/G,e=H.line(N,P,$,P).attr({stroke:"#e2e2e2",strokeDasharray:"10 2",strokeWidth:.5}),r=1;G>=r;r++){var n=P-r*t;e.clone().attr({x1:N,y1:n,x2:$,y2:n});var i=H.text(N,n+15,L(I*r)).attr({fill:W,fontSize:12});X=i.getBBox().width+N+10>X?i.getBBox().width+N+10:X}}function x(t){return t||(t=0),t=parseFloat(t),P-K-t/(I*G)*(P-K)}function w(t,e){var r=_*D,n=x(t),i=y.rect(e?r+16:r+28,n,10,P-K-n).attr({fill:e?"#7cb7ef":"#f5a25c"});if(j.add(i),e){e=e.toString();var o=E?8:6;if(e.length>o&&(e=B(e,o)),e.length>o/2){var a=e.substr(0,o/2),f=e.substr(o/2),l=y.text(r,P-K+11,a).attr({fill:W,fontSize:10}),c=y.text(r,P-K+22,f).attr({fill:W,fontSize:10});l.attr("x",r+(_-l.getBBox().width)/2),c.attr("x",r+(_-l.getBBox().width)/2),j.add(l,c)}else{var s=y.text(r,P-K+11,e).attr({fill:W,fontSize:10});s.attr("x",r+(_-s.getBBox().width)/2),j.add(s)}}}function b(t,e){w(t.k1.price,t.name,e),w(t.k2.price,!1,e)}function M(){y=H.svg(X,K,O-X,V-K),j=y.g(),D=0;for(var t=0;t<r.length;t++)if(Y){var n=0;if(e.each(r[t].item,function(e,r){E?b(r,t):w(r.price,r.name,t),D++,n++}),n>1){var i=y.text(D*_,V-K-2,B(r[t].name,6)).attr({fill:W,fontSize:10});i.attr({x:(D-n)*_+(n*_-i.getBBox().width)/2}),j.add(i)}var o=y.line(D*_,P-K+2,D*_,V-K-1).attr({stroke:W,strokeDasharray:"5 2",strokeWidth:1});j.add(o)}else E?b(r[t]):w(r[t].price,r[t].name),D++}var y,X,D,P,I,_,A,j,E,Y,C,H=Snap(t),O=S(a,"vw",e(t).width()),V=S(a,"vh",e(t).height()),Z=S(a,"tt",0),q=S(a,"tb",30),K=S(a,"ct",2*(q-Z)+Z+10),N=10,$=O,G=5,J=0,Q=0,R=S(a,"isfull",!1);l()}function l(t,r,i,o,a,f){function l(){return n(x,r,f)?("function"!=typeof o&&(o=function(){}),void s()):!1}function c(){T?x.mousedown(function(){e(".svgpiepie").attr("transform",""),g(),o()}):x.touchstart(function(){e(".svgpiepie").attr("transform",""),g(),o()})}function s(){var e={};e.price=0,e.time=0,e.num=0,e._num=0;for(var n=r[0].price,i=0;i<r.length;i++){void 0!=n?r[i]._num=r[i].price:r[i]._num=r[i].num;var o=parseFloat(r[i]._num);if(_){var a=r[i].name.toString();a.length>5&&(A=2)}if(!o){if(0==i)return console.log("s:第一个数据数值为0"),k(x,f);r.splice(i,r.length-i);break}I+=o,i+1>8&&(e._num+=o,e.name="其他",e.num+=parseFloat(r[i].num))}e.name&&(e._num+=parseFloat(r[7]._num),e.num+=parseFloat(r[7].num),e.price+=parseFloat(r[7].price),e.time+=parseFloat(r[7].time),r.splice(7,r.length-7,e)),chartSuccess(t,"pie"),r[0]._num==I?d():u(),c()}function u(){var t=0,n=[],i=[];n[0]=W-X,i[0]=D,e.each(r,function(e,r){var o=r._num/I,a=o>.5?1:0;t+=o,n[e+1]=W-X*Math.cos(2*Math.PI*t),i[e+1]=D-X*Math.sin(2*Math.PI*t);var f=t-o/2,l=W-10*Math.cos(2*Math.PI*f)-W,c=D-10*Math.sin(2*Math.PI*f)-D,s="M "+W+" "+D+"L "+n[e]+" "+i[e]+" A "+X+" "+X+" 0 "+a+" 1 "+n[e+1]+" "+i[e+1]+"  Z",u=x.g().attr({"class":"svgpiepie"}),d=Math.floor(Math.random()*P.length),p=x.path(s).attr({fill:P[d],stroke:"#fff",strokeWidth:"1"});if(u.add(p),o>1/14){var m=W-X*Math.cos(2*Math.PI*f)/1.4-18,g=D-X*Math.sin(2*Math.PI*f)/1.4,w=x.text(m,g,Math.round(1e3*r._num/I)/10+"%").attr({fill:"#fff",fontSize:12});u.add(w)}T?u.mousedown(function(t){v(this,l,c,r,t)}):u.touchstart(function(t){v(this,l,c,r,t)}),h(P[d],e,r,u,l,c),P.splice(d,1)})}function h(t,e,r,n,i,o){if(_)var a=Math.floor(e/A),f=e%A,l=x.rect(w/10+f*(.8*w)/A,y+30+30*a,5,5).attr({fill:t}),c=x.text(w/10+f*(.8*w)/A+10,y+38+30*a,B(r.name,3==A?5:8)).attr({fontSize:14});else var s=M+e*(y-M)/8+9,l=x.rect(2*w/3,s,5,5).attr({fill:t}),c=x.text(2*w/3+10,s+7,T?r.name:B(r.name,6)).attr({fontSize:14});var u=x.g();u.add(l,c),T?u.mousedown(function(t){v(n,i,o,r,t)}):u.touchstart(function(t){v(n,i,o,r,t)})}function d(){var t=Math.floor(8*Math.random()),e=x.circle(W,D,X).attr({fill:P[t]});T?e.mousedown(function(n){n.stopPropagation(),e.attr("hasTip","1"),m(P[t],r[0]),o(r[0])}).mouseup(function(){e.attr("hasTip","0"),g(),o()}):e.touchstart(function(n){n.stopPropagation(),e.attr("hasTip","1"),m(P[t],r[0]),_&&p(r[0].name),o(r[0])}).touchend(function(){e.attr("hasTip","0"),g(),o()}),x.text(W-12,D,"100%").attr({fill:"#fff",fontSize:12}),h(P[t],0,r[0],e)}function v(t,r,n,i,a){if(r){if(!t.transform().string){var f=t.select("path").attr("fill");a.stopPropagation(),T?(e(".svgpiepie").removeAttr("transform"),e(t.node).attr({transform:"translate("+r+","+n+")"})):(e(".svgpiepie").attr("transform",""),t.animate({transform:"translate("+r+","+n+")"},300,mina.easein)),m(f,i),_&&p(i.name),o(i)}}else{var f=t.attr("fill");1==t.attr("hasTip")?t.attr({hasTip:"0"}):(a.stopPropagation(),t.attr({hasTip:"1"}),m(f,i),_&&p(i.name),o(i))}}function p(t){var e=x.text(0,F-17,t).attr({"class":"svgpietip",fill:"#1978bc",fontSize:18});e.attr("x",w/2-e.getBBox().width/2)}function m(t,n){e(".svgpietip").remove();var o=x.rect(w/2,F,0,z-F,3).attr({fill:t,"class":"svgpietip"});if("undefined"==typeof r[0].time)var a=x.text(w/2,z-(z-F-10)/2,[i[0]+":　","￥",L(n.price)+"　",n.num,"笔"]).attr({fill:"#fff","class":"svgpietip",fontSize:14});else var a=x.text(w/2,z-(z-F-10)/2,[i[0]+":　",n.time,"个客户"]).attr({fill:"#fff","class":"svgpietip",fontSize:14});o.attr({width:a.getBBox().width+20,x:w/2-(a.getBBox().width+20)/2}),a.attr({x:w/2-a.getBBox().width/2})}function g(){e(".svgpietip").remove()}var x=Snap(t),w=S(a,"vw",e(t).width()),b=S(a,"vh",e(t).height()),F=S(a,"tt",0),z=S(a,"tb",35),M=S(a,"ct",z+30),y=S(a,"cb",b-10),W=S(a,"px",w/3),X=.8*W>(y-M)/2?(y-M)/2:.8*W,D=M+X,P=["#F27254","#FFBE32","#A1BB38","#5BC45E","#51B4D4","#576ACD","#A66CE2","#FF74E0"],I=0,_=S(a,"isfull",!1),A=3;l()}function c(t,r){function i(){return"undefined"==typeof nodataStr&&(nodataStr=""),n(f,r,nodataStr)?void o():!1}function o(){var t,e;if(2!=r.length)w(f,"数据错误");else{var n=parseInt(r[0])+parseInt(r[1]);0==n?(t=.5,e=.5):(t=parseInt(r[0])/n,e=parseInt(r[1])/n)}a(t,e)}function a(t,r){var n=0,i=[],o=[];i[0]=s,o[0]=u-h,e.each([t,r],function(t,e){1==e&&(e=.9999);var r=e>.5?1:0;n+=e,i[t+1]=s+h*Math.sin(2*Math.PI*n),o[t+1]=u-h*Math.cos(2*Math.PI*n);var a="M "+s+" "+u+"L "+i[t]+" "+o[t]+" A "+h+" "+h+" 0 "+r+" 1 "+i[t+1]+" "+o[t+1]+"  Z";f.path(a).attr({fill:d[t]})}),f.circle(s,u,3*h/4).attr({fill:"#ffffff"})}var f=Snap(t),l=e(t).width(),c=e(t).height(),s=l/2,u=c/2,h=s>u?u:s,d=["#7ad169","#e5e5e5"];i()}function s(t,r,i,o,a,f){function l(){return n(j,r,f)?("function"!=typeof o&&(o=function(){}),void c()):!1}function c(){var e=0,n=0;void 0!=r.avg?(A=r.avg,r=r.item):A=!1;for(var i=0;i<r.length;i++){if(e>=100){r.splice(i,r.length-i);break}var o=s(r[i],n);o?n=o:(r.splice(i,1),i--),e++}return r.length?(D=F(n,N),chartSuccess(t,"column"),g(),z(),b(),void m()):(console.log("s:"+e+"条数据num全是0"),k(j,f))}function s(t,e){var r;return 0==parseFloat(t.num)?!1:r=parseFloat(t.num)>e?parseFloat(t.num):e}function u(t,e){if(e){var r=t*K+K/2+y+$,n=x(e.num)+O-8,o=j.line(r,n,r,H).attr({stroke:"#d2d2d2",strokeWidth:2.5}),a=j.circle(r,n,3).attr({stroke:"#47a8ef",strokeWidth:3,fill:"#fff"}),f=j.paper.rect(r,C,100,H-C,4).attr({fill:"#47a8ef"});if(A)var l=[i[0]+":　",e.num+"次"];else var l=[i[0]+":　",e.num+"次　人均:　",e.avg,"次"];var c=j.paper.text(r,H-(H-C-14)/2,l).attr({fill:"#fff",fontSize:14}),s=c.getBBox().width,u=s+20,h=r-u/2;0>h?h=0:h>E-u&&(h=E-u),f.attr({width:u,x:h}),c.attr({x:(u-s)/2+h});var d=j.paper.g();d.attr("class","svgcolumntip"),d.attr("svgcolumntipid",t),d.add(f,c,o,a)}else console.log("点击到了bar之外的区域")}function h(t){u(t,r[t]),o(r[t]),J&&v(r[t].name)}function d(){e(".svgcolumntip").remove(),o()}function v(t){var e=j.text(0,C-8,t).attr({"class":"svgcolumntip",fill:"#1978bc",fontSize:18});e.attr("x",E/2-e.getBBox().width/2)}function p(t,e){G=$+t-P,G>0?G=0:-K*(X+1)+E-y>G&&(G=K*(X+1)>E-y?-K*(X+1)+E-y:0),I.transform("translate("+G+",0)")}function m(){T?(j.mousedown(function(t){j.unmousemove(),P=t.clientX+e(document).scrollLeft()-e(j.node).offset().left,P=P/e(j.node).width()*E,j.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(j.node).offset().left;r=r/e(j.node).width()*E,r-P!=0&&(d(),clearTimeout(_)),p(r,t)}),j.mouseup(function(t){j.unmousemove(),j.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(j.node).offset().left;r=r/e(j.node).width()*E,r=r-y-$;var n=Math.floor(r/K),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&X>n&&i!=n&&(d(),h(n))}),$=G})}),j.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(j.node).offset().left;r=r/e(j.node).width()*E,r=r-y-$;var n=Math.floor(r/K),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&X>n&&i!=n&&(d(),h(n))}),e(t).mouseleave(function(){d()})):(j.touchstart(function(t){P=t.touches[0].clientX,J&&(P=P/e(j.node).width()*E),j.touchmove(function(t){if(clearTimeout(_),J){var r=t.touches[0].clientX;t.preventDefault(),r=r/e(j.node).width()*E,p(r,t)}})}),j.touchend(function(t){j.untouchmove(),$=G}))}function g(){y=0;for(var t=(V-O)/N,e=j.line(Z,V,q,V).attr({stroke:"#e2e2e2",strokeDasharray:"10 2",strokeWidth:.5}),r=1;N>=r;r++){var n=V-r*t;e.clone().attr({x1:Z,y1:n,x2:q,y2:n});var i=j.text(Z,n+15,L(D*r)).attr({fill:W,fontSize:12});y=i.getBBox().width+Z+10>y?i.getBBox().width+Z+10:y}}function x(t){return t||(t=0),t=parseFloat(t),V-O-t/(D*N)*(V-O)}function w(t,e){var r=K*X,n=x(t),i=M.rect(e?r+16:r+28,n,10,V-O-n).attr({fill:e?"#7cb7ef":"#f5a25c"});if(I.add(i),e){var o=M.text(r,n-2,t).attr({fill:W,fontSize:10});o.attr("x",r+(K-o.getBBox().width)/2),I.add(o)}e=e.toString();var a=6;if(e.length>a&&(e=B(e,a)),e.length>a/2){var f=e.substr(0,a/2),l=e.substr(a/2),c=M.text(r,V-O+11,f).attr({fill:W,fontSize:10}),s=M.text(r,V-O+22,l).attr({fill:W,fontSize:10});c.attr("x",r+(K-c.getBBox().width)/2),s.attr("x",r+(K-c.getBBox().width)/2),I.add(c,s)}else{var u=M.text(r,V-O+11,e).attr({fill:W,fontSize:10});u.attr("x",r+(K-u.getBBox().width)/2),I.add(u)}}function b(){if(A){var t=j.circle(2,2,1.2).attr({stroke:"#f5a25c",strokeWidth:1,fill:"#ffffff"}),e=t.marker(0,0,4,4,2,2),r="M"+(y+K/5)+" "+(x(A)+O)+"L"+(q-K/5-5)+" "+(x(A)+O);j.path(r).attr({stroke:"#f5a25c",strokeWidth:2.5,fill:"none",strokeLinejoin:"bevel",markerEnd:e});var n=j.rect(E,x(A)+O-20-13,0,17,10,10).attr({fill:"#f5a25c"}),i=j.text(E,x(A)+O-20,"人均"+A+"Km").attr({fill:"#ffffff",fontSize:12});n.attr({x:q-i.getBBox().width-15,width:i.getBBox().width+10}),i.attr({x:q-i.getBBox().width-10})}}function z(){M=j.svg(y,O,E-y,Y-O),I=M.g(),X=0;for(var t=0;t<r.length;t++)w(r[t].num,r[t].name),X++}var M,y,X,D,P,I,_,A,j=Snap(t),E=S(a,"vw",e(t).width()),Y=S(a,"vh",e(t).height()),C=S(a,"tt",0),H=S(a,"tb",30),O=S(a,"ct",2*(H-C)+C+10),V=Y-25,Z=10,q=E,K=42,N=5,$=0,G=0,J=S(a,"isfull",!1);l()}function u(t,r,i,o,a,f){function l(){return n(j,r,f)?("function"!=typeof o&&(o=function(){}),void c()):!1}function c(){var e=0,n=0;void 0!=r.avg?(A=r.avg,r=r.item):A=!1;for(var i=0;i<r.length;i++){if(e>=100){r.splice(i,r.length-i);break}var o=s(r[i],n);o?n=o:(r.splice(i,1),i--),e++}return r.length?(D=F(n,N),chartSuccess(t,"column"),g(),z(),b(),void m()):(console.log("s:"+e+"条数据num全是0"),k(j,f))}function s(t,e){var r;return 0==parseFloat(t.num)?!1:r=parseFloat(t.num)>e?parseFloat(t.num):e}function u(t,e){if(e){var r=t*K+K/2+y+$,n=x(e.num)+O-8,o=j.line(r,n,r,H).attr({stroke:"#d2d2d2",strokeWidth:2.5}),a=j.circle(r,n,3).attr({stroke:"#47a8ef",strokeWidth:3,fill:"#fff"}),f=j.paper.rect(r,C,100,H-C,4).attr({fill:"#47a8ef"});if(A)var l=[i[0]+":　",e.num+"次"];else var l=[i[0]+":　",e.num+"次　人均:　",e.avg,"次"];var c=j.paper.text(r,H-(H-C-14)/2,l).attr({fill:"#fff",fontSize:14}),s=c.getBBox().width,u=s+20,h=r-u/2;0>h?h=0:h>E-u&&(h=E-u),f.attr({width:u,x:h}),c.attr({x:(u-s)/2+h});var d=j.paper.g();d.attr("class","svgcolumntip"),d.attr("svgcolumntipid",t),d.add(f,c,o,a)}else console.log("点击到了bar之外的区域")}function h(t){u(t,r[t]),o(r[t]),J&&v(r[t].name)}function d(){e(".svgcolumntip").remove(),o()}function v(t){var e=j.text(0,C-8,t).attr({"class":"svgcolumntip",fill:"#1978bc",fontSize:18});e.attr("x",E/2-e.getBBox().width/2)}function p(t,e){G=$+t-P,G>0?G=0:-K*(X+1)+E-y>G&&(G=K*(X+1)>E-y?-K*(X+1)+E-y:0),I.transform("translate("+G+",0)")}function m(){T?(j.mousedown(function(t){j.unmousemove(),P=t.clientX+e(document).scrollLeft()-e(j.node).offset().left,P=P/e(j.node).width()*E,j.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(j.node).offset().left;r=r/e(j.node).width()*E,r-P!=0&&(d(),clearTimeout(_)),p(r,t)}),j.mouseup(function(t){j.unmousemove(),j.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(j.node).offset().left;r=r/e(j.node).width()*E,r=r-y-$;var n=Math.floor(r/K),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&X>n&&i!=n&&(d(),h(n))}),$=G})}),j.mousemove(function(t){var r=t.clientX+e(document).scrollLeft()-e(j.node).offset().left;r=r/e(j.node).width()*E,r=r-y-$;var n=Math.floor(r/K),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&X>n&&i!=n&&(d(),h(n))}),e(t).mouseleave(function(){d()})):(j.touchstart(function(t){P=t.touches[0].clientX,J&&(P=P/e(j.node).width()*E),_=setTimeout(function(){j.untouchmove();var t=P-y-$,r=Math.floor(t/K);r>=0&&X>r&&h(r),j.touchmove(function(t){t.preventDefault(),P=t.touches[0].clientX,J&&(P=P/e(j.node).width()*E);var r=P-y-$,n=Math.floor(r/K),i=e(".svgcolumntip").attr("svgcolumntipid");n>=0&&X>n&&i!=n&&(d(),h(n))})},100),j.touchmove(function(t){if(clearTimeout(_),J){var r=t.touches[0].clientX;t.preventDefault(),r=r/e(j.node).width()*E,p(r,t)}})}),j.touchend(function(t){j.untouchmove(),d(),clearTimeout(_),$=G}))}function g(){y=0;for(var t=(V-O)/N,e=j.line(Z,V,q,V).attr({stroke:"#e2e2e2",strokeDasharray:"10 2",strokeWidth:.5}),r=1;N>=r;r++){var n=V-r*t;e.clone().attr({x1:Z,y1:n,x2:q,y2:n});var i=j.text(Z,n+15,L(D*r)).attr({fill:W,fontSize:12});y=i.getBBox().width+Z+10>y?i.getBBox().width+Z+10:y}}function x(t){return t||(t=0),t=parseFloat(t),V-O-t/(D*N)*(V-O)}function w(t,e){var r=K*X,n=x(t),i=M.rect(e?r+16:r+28,n,10,V-O-n).attr({fill:e?"#7cb7ef":"#f5a25c"});I.add(i),e=e.toString();var o=6;if(e.length>o&&(e=B(e,o)),e.length>o/2){var a=e.substr(0,o/2),f=e.substr(o/2),l=M.text(r,V-O+11,a).attr({fill:W,fontSize:10}),c=M.text(r,V-O+22,f).attr({fill:W,fontSize:10});l.attr("x",r+(K-l.getBBox().width)/2),c.attr("x",r+(K-l.getBBox().width)/2),I.add(l,c)}else{var s=M.text(r,V-O+11,e).attr({fill:W,fontSize:10});s.attr("x",r+(K-s.getBBox().width)/2),I.add(s)}}function b(){if(A){var t=j.circle(2,2,1.2).attr({stroke:"#f5a25c",strokeWidth:1,fill:"#ffffff"}),e=t.marker(0,0,4,4,2,2),n="M"+(y+K/5)+" "+(x(A)+O)+"L"+(q-K/5-5)+" "+(x(A)+O);j.path(n).attr({stroke:"#f5a25c",strokeWidth:2.5,fill:"none",strokeLinejoin:"bevel",markerEnd:e});var i=j.rect(E,x(A)+O-20-13,0,17,10,10).attr({fill:"#f5a25c"}),o=j.text(E,x(A)+O-20,"人均"+A+"次").attr({fill:"#ffffff",fontSize:12});i.attr({x:q-o.getBBox().width-15,width:o.getBBox().width+10}),o.attr({x:q-o.getBBox().width-10})}else{for(var n="M"+K/2+" "+x(r[0].avg),a=1;a<r.length;a++)void 0!=r[a]&&(n+="L"+(K*a+K/2)+" "+x(r[a].avg));if(1==r.length){var f=M.circle(K/2,x(r[0].avg),4).attr({stroke:"#f5a25c",strokeWidth:2,fill:"#ffffff"});I.add(f)}else{var l=M.path(n).attr({stroke:"#f5a25c",
strokeWidth:2.5,fill:"none",strokeLinejoin:"bevel"});I.add(l)}}}function z(){M=j.svg(y,O,E-y,Y-O),I=M.g(),X=0;for(var t=0;t<r.length;t++)w(r[t].num,r[t].name),X++}var M,y,X,D,P,I,_,A,j=Snap(t),E=S(a,"vw",e(t).width()),Y=S(a,"vh",e(t).height()),C=S(a,"tt",0),H=S(a,"tb",30),O=S(a,"ct",2*(H-C)+C+10),V=Y-25,Z=10,q=E,K=42,N=5,$=0,G=0,J=S(a,"isfull",!1);l()}function h(t,e,r,n,i){var o=b(t,340),a=o.width,l=o.height,c=55,s=30,u={tb:c,tt:s,ct:2*(c-s)+s+3,vw:a,vh:l,isfull:!0};f(t,e,r,n,u,i)}function d(t,e,r,n,i){var o=b(t,340),a=o.width,f=o.height,l=55,c=30,s={tb:l,tt:c,ct:2*(l-c)+c+3,vw:a,vh:f,isfull:!0};u(t,e,r,n,s,i)}function v(t,e,r,n,o){var a=b(t,300),f=a.width,l=a.height,c=40,s=10,u={tb:c,tt:s,ct:2*(c-s)+s+3,vw:f,vh:l,isfull:!0};i(t,e,r,n,u,o)}function p(t,e,r,n,i){var a=b(t),f=a.width,l=a.height,c={vw:f,vh:l-80,tt:30,tb:60,isfull:!0};o(t,e,r,n,c,i)}function m(t,e,r,n,i){var o=b(t),f=o.width,l=o.height,c={vw:f,vh:l-80,tt:30,tb:60,isfull:!0};a(t,e,r,n,c,i)}function g(t,e,r,n,i){var o=b(t),a=o.width,f=o.height,c=f-220,s={cb:c,tb:85,tt:50,px:a/2,vw:a,vh:f,isfull:!0};l(t,e,r,n,s,i)}function x(t,e,r,n,o){y=!0;var a={isHome:!0,tt:20,tb:55,ct:70};i(t,e,r,n,a,o)}function w(t,r){var n=t.text(e(t.node).width()/2,e(t.node).height()/2+20,r).attr({fontSize:24});return n.attr({x:e(t.node).width()/2-n.getBBox().width/2}),!1}function k(t,r){var n,i;t.attr("viewBox")?(n=t.attr("viewBox").width,i=t.attr("viewBox").height):(n=e(t.node).width(),i=e(t.node).height());var o=t.paper.image(svgnodataurl,10,10,168,90);o.attr({x:n/2-o.getBBox().width/2,y:i/2-o.getBBox().height/2});var a="暂无经营数据",f="赶快使用订单系统，公司经营各项数据轻松在手！";r&&(a=r.split("|")[0],f=r.split("|")[1]);var l=t.text(n/2,o.getBBox().y2+24,a).attr({fontSize:16,fill:y?"#67b7ed":"#bbbbbb"}),c=t.text(n/2,o.getBBox().y2+46,f).attr({fontSize:14,fill:y?"#67b7ed":"#bbbbbb"});return l.attr({x:n/2-l.getBBox().width/2}),c.attr({x:n/2-c.getBBox().width/2}),!1}function B(t,e){return t.substr(0,e)}function S(t,e,r){return t&&void 0!=t[e]?t[e]:r}function b(t,r){var n=Snap(t);n.attr("height","100%");var i={};return r?(i.height=r,i.width=i.height*e(window).width()/e(window).height()):(i.width=e(window).width(),i.height=e(window).height()),n.attr("viewBox","0 0 "+i.width+" "+i.height),i}function F(t,e){if(0==t)return 1;var r,n=t/e;return r=n>1e4?5e3:n>5e3?1e3:n>2e3?500:n>500?100:n>100?20:n>e?10:1,Math.ceil(n/r)*r}function z(t,e){for(var r=0,n=0,i=0,o=0;o<e.length;o++){if(t<e[o].item.length+i)return r=o,n=t-i,{parent:r,child:n};i=e[o].item.length+i}return!1}function M(t){var e;return t>=1e5?t>=1e8?t>=1e10?(e=Math.round(t/1e8),[e.toString(),"亿"]):(e=Math.round(t/1e7),[e.toString().slice(0,-1),"亿",e.toString().slice(-1)]):t>=1e6?(e=Math.round(t/1e4),[e.toString(),"万"]):(e=Math.round(t/1e3),[e.toString().slice(0,-1),"万",e.toString().slice(-1)]):[t.toString()]}function L(t){var e,r=M(parseInt(t));if(r[0].length>3)for(var n=3;n<r[0].length;n+=4)e=r[0].slice(0,-n)+","+r[0].slice(-n);else e=r[0];return r[2]&&(e+="."+r[2]),r[1]&&(e+=r[1]),e}var T=!1,y=!1,W="#b0b0b0";return{draw:r,drawBar:o,drawLine:i,drawColumn:f,drawPie:l,drawLoop:c,drawMixAvg:u,drawMixAvgNoTip:s,drawHomeLine:x,drawProgress:a,drawFullBar:p,drawFullLine:v,drawFullMixAvg:d,drawFullPie:g,drawFullColumn:h,drawFullProgress:m}});